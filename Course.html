<!DOCTYPE html>
<html lang="en">
<head>
<title>Add Entry</title>
<meta name="description" content="This is a tool to check the most popular baby names." />
<meta name="keywords" content="baby names"  />
<meta name="author" content="Devanshu Sheth" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
</script>
<script>

//$("#btnadd").hide();
$(document).ready(function(){

$("#result").hide();
$("#btnSubmit").click(function(){


$(".div1").empty();
  $.ajax({
	  type: "GET",
      url: "getTableDetails.php",                   
      data:  { tablechoice : $("#optionTables").val()},                        
	  dataType: "json",				
      success: function(rows)         
       {
		var tablechoice = $("#optionTables").val();
		//$("#demo").show();
		$form = $('<form id="form1" action="addEntry.php" method="POST"></form>').appendTo('.div1');
		var tablestr = $('<input type="hidden"/>');
		$form.append(tablestr);
		tablestr.attr('name', 'tablename');
		tablestr.attr('value', tablechoice);
		for (var i in rows)
			{
	
			
			var colname = rows[i];

			
			
			if(tablechoice == "college" && rows[i] == "DeanId" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "college", columnchoice : "DeanId"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "DeanId" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "DeanId");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['ID'];
			$(selectstr).append('<option>'+datarow['ID']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "collegephone" && rows[i] == "CName" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "collegephone", columnchoice : "CName"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "CName" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "CName");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['CName'];
			$(selectstr).append('<option>'+datarow['CName']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "course" && rows[i] == "CoDCode" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "course", columnchoice : "CoDCode"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "CoDCode" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "CoDCode");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['DCode'];
			$(selectstr).append('<option>'+datarow['DCode']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "department" && rows[i] == "CName" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "department", columnchoice : "CName"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "CName" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "CName");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['CName'];
			if(datarow['CName'])
			{
			$(selectstr).append('<option>'+datarow['CName']+ '</option>');
			}
			
			
			}
			 $form.append('</select></p>');
			 
			 
			  var selectstr1 = $('<select>');
	  $form.append("<p>" + "DeptChairID" + " : ");
	  $form.append(selectstr1);
			
	selectstr1.attr('name', "DeptChairID");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['ID'];
			if(datarow['ID'])
			{
			$(selectstr1).append('<option>'+datarow['ID']+ '</option>');
			}
			
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "deptphone" && rows[i] == "DCode" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "course", columnchoice : "DCode"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "DCode" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "DCode");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['DCode'];
			$(selectstr).append('<option>'+datarow['DCode']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "instrphone" && rows[i] == "ID" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "instrphone", columnchoice : "ID"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "ID" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "ID");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['ID'];
			$(selectstr).append('<option>'+datarow['ID']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "instructor" && rows[i] == "DCode" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "instructor", columnchoice : "DCode"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "DCode" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "DCode");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['DCode'];
			$(selectstr).append('<option>'+datarow['DCode']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "section" && rows[i] == "InstructorID" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "section", columnchoice : "CoCode"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  
	   var selectstr1 = $('<select>');
	  $form.append("<p>" + "CoCode" + " : ");
	  $form.append(selectstr1);
			
	selectstr1.attr('name', "CoCode");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['CoCode'];
			if(datarow['CoCode'])
			{
			$(selectstr1).append('<option>'+datarow['CoCode']+ '</option>');
			}
			
			
			}
			 $form.append('</select></p>');
	  var selectstr = $('<select>');
	  $form.append("<p>" + "InstructorID" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "InstructorID");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['ID'];
			if(datarow['ID'])
			{
			$(selectstr).append('<option>'+datarow['ID']+ '</option>');
			}
			
			
			}
			 $form.append('</select></p>');
			 
			 
			 
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "student" && rows[i] == "DCode" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "student", columnchoice : "DCode"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "DCode" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "DCode");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['DCode'];
			$(selectstr).append('<option>'+datarow['DCode']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "studentphone" && rows[i] == "SID" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "studentphone", columnchoice : "SID"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  var selectstr = $('<select>');
	  $form.append("<p>" + "SID" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "SID");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['SID'];
			$(selectstr).append('<option>'+datarow['SID']+ '</option>');
			
			}
			 $form.append('</select></p>');
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(tablechoice == "takes" && rows[i] == "SID" )
			{
			//$(".test").html(colname);
			$.ajax({
			
	  type: "GET",
      url: "handleDropdown.php",                   
      data:  { tablechoice : "takes", columnchoice : "SID"},                        
	  dataType: "json",				
      success: function(datarows)  
	  {
	  
	   var selectstr1 = $('<select>');
	  $form.append("<p>" + "SecID" + " : ");
	  $form.append(selectstr1);
			
	selectstr1.attr('name', "SecID");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['SecId'];
			if(datarow['SecId'])
			{
			$(selectstr1).append('<option>'+datarow['SecId']+ '</option>');
			}
			
			
			}
			 $form.append('</select></p>');
	  var selectstr = $('<select>');
	  $form.append("<p>" + "SID" + " : ");
	  $form.append(selectstr);
			
	selectstr.attr('name', "SID");
			
			for(var i in datarows)
			{
			var datarow = datarows[i];           
			
			var coldata = datarow['SID'];
			if(datarow['SID'])
			{
			$(selectstr).append('<option>'+datarow['SID']+ '</option>');
			}
			
			
			}
			 $form.append('</select></p>');
			 
			 
			 
			 $form.append("<p>" + '<input type="submit" value ="Add Entry" />' +  "</p>");
	  }
			
			});
			}
			else if(rows[i] == "DeleteCollege" || rows[i] == "DeleteCollegePhone" || rows[i] == "DeleteCourse" || rows[i] == "DeleteDepartment" || rows[i] == "DeleteDeptPhone" || rows[i] == "DeleteInstrPhone" || rows[i] == "DeleteInstructor" || rows[i] == "DeleteSection" || rows[i] == "DeleteStudent" || rows[i] == "DeleteStudentPhone" ||rows[i] == "DeleteTakes" )
			{
			var selectstr = $('<select>');
			$form.append("<p>" + colname + " : ");
			$form.append(selectstr);
			
			selectstr.attr('name', colname);
			$(selectstr).append('<option>'+ "Y" + '</option>');
			$(selectstr).append('<option selected>'+ "N" + '</option>');
			$form.append('</select></p>');
			}
			else if ((tablechoice == "section" && rows[i] == "InstructorID") || (tablechoice == "takes" && rows[i] == "SecID")  || (tablechoice == "department" && rows[i] == "DeptChairID") )
			{
			}

			
			else
			{
			var htmlstr = $('<input type="text"/>');
			$form.append("<p>" + colname + " : ");
			$form.append(htmlstr);
			$form.append("</p>");
			htmlstr.attr('name', colname);
			}
			} 
			
			
			
		}
		
		
    });
	
  });
$("#btnUpdate").click(function(){

$("#demo #headtable tr").remove();
$("#demo #headtable th").remove();


	var columnnames = [];
	 $("#demo tbody tr").remove();
	 $("#demo tbody td").remove();
	  $.ajax({
	  async: false,
	  type: "GET",
      url: "getTableDetails.php",                   
      data:  { tablechoice : $("#optionTables").val()},                        
	  							
	  dataType: "json",				
      success: function(rows)         
       {
	  $("#result").show();
	   
	 $("#demo #headtable").append("<tr>");
    for (var i in rows)
    {
      var row = rows[i];          
	columnnames[i] = rows[i];
     
	  $("#demo #headtable").append("<th>"+row+"</th>");
	 
} 
 $("#demo #headtable").append("</tr>");
  }  
    });
	 
	 
  $.ajax({
	  type: "GET",
      url: "getTableInfo.php",                   
      data:  { tablechoice : $("#optionTables").val()},                        
	  							
	  dataType: "json",				
      success: function(rows)         
       {
	  $("#result").show();
	   
    for (var i in rows)
    {
      var row = rows[i];          
 $("#demo tbody").append("<tr>");
	  for (var j in columnnames)
	  {
	   var pelement = row[columnnames[j]];
       
	  
     
	  $("#demo tbody").append("<td>" + pelement + "</td>");
	  }
     
	  $("#demo tbody").append("</tr>");
    } 
  }  
    });
	
  });
  
  
 

});

</script>
<style type="text/css">
table,th,td {
  border : 1px solid black;
}
th,td {
  padding: 5px;
}
</style>
</head>
<body>

<h3>Add A New Table</h3>
<p>
Table Name: <select name="optionTables" id="optionTables">
<option selected>None</option>
<option>college</option>
<option>collegephone</option>
<option>course</option>
<option>department</option>
<option>deptphone</option>
<option>instrphone</option>
<option>instructor</option>
<option>logindetail</option>
<option>section</option>
<option>student</option>
<option>studentphone</option>
<option>takes</option>
</select>
</p>
<button id="btnSubmit">Add</button>
<button id="btnUpdate">Update</button>
<div class="div1"></div>
<div id="result">
<table id="demo">
<thead id="headtable">
</thead>
<tbody>
</tbody>
</table>

</div>
<div class="test"> TEST</div>
</body>


</html>
